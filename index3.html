<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>digg reboot</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-color: #1839a6;
            --text-color: white;
            --button-bg: #ffffff;
            --button-text: #2064db;
            --button-hover: #f0f0f0;
        }

        .dark-mode {
            --bg-color: #000000;
            --text-color: white;
            --button-bg: #333333;
            --button-text: white;
            --button-hover: #444444;
        }

        body, html {
            height: 100%;
            width: 100%;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 20px;
            position: relative;
            z-index: 1; /* Ensure content stays above the animation */
        }

        .logo {
            margin-bottom: 2rem;
            /* Adjust size as needed */
            max-width: 150px;
        }

        .main-heading {
            font-size: 33px;
            font-weight: 800;
            margin-bottom: 1rem;
            height: 60px; /* Fixed height to prevent layout shift during typing */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .sub-heading {
            font-size: 12px;
            font-weight: 400;
            margin-bottom: 2rem;
	    margin-top: 2rem;
            max-width: 600px;
        }

        .email-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-bottom: 14rem;
        }

        .email-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border-radius: 50px;
            outline: none;
            padding-right: 130px; /* Space for the button */
        }
        
        .email-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .signup-button {
            position: absolute;
            right: 5px;
            top: 5px;
            padding: 13px 20px;
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .signup-button:hover {
            background-color: var(--button-hover);
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--button-bg);
            color: var(--button-text);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .logo-container {
            margin-bottom: 2rem;
            /* Apply white filter to SVG */
            filter: brightness(0) invert(1);
            max-width: 150px;
        }

        .animation-container {
            position: fixed;
            bottom: 0; /* Anchor to bottom */
            left: 0;
            width: 100%;
            height: 80%; /* 80% of viewport height */
            z-index: -1; /* Place it behind all content */
            display: flex;
            justify-content: center;
            align-items: flex-end; /* Align to bottom */
            opacity: 0.6; /* Make it slightly transparent so the text is clearly readable */
            pointer-events: none; /* Allow clicks to pass through to elements below */
            overflow: hidden; /* Prevent any overflow */
        }

        .cursor {
            display: inline-block;
            width: 3px;
            background-color: var(--text-color);
            animation: blink 1s infinite;
            margin-left: 5px;
            height: 42px;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <button id="theme-toggle" class="theme-toggle">ðŸŒ“</button>
    <div class="container">
        <div class="logo-container">
            <img src="logo.svg" alt="Logo" class="logo">
        </div>

        <div class="main-heading">
            <span id="typed-text"></span>
            <span class="cursor"></span>
        </div>

        <p class="sub-heading">Join today and be the first to know when we re-launch.</p>

        <div class="email-container">
            <input type="email" id="email" class="email-input" placeholder="Enter your email address">
            <button class="signup-button">Sign Up</button>
        </div>

    <div id="lottie-animation" class="animation-container"></div>
    </div>

    <!-- LottieFiles Player -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    
    <script>
        // Typing Animation Logic
        const typingTexts = [
            "The homepage of the internet, now with superpowers",
            "Rediscover the internet again",
            "Rebooting Digg. Old vibes, new intelligence",
            "Community at the core, intelligence at the edges",
            "Where user revolts become the company roadmap"
        ];
        
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typingSpeed = 100; // Milliseconds between each character
        let pauseDuration = 1000; // 1 second pause at the end
        const typedTextElement = document.getElementById('typed-text');
        
        function typeText() {
            const currentText = typingTexts[textIndex];
            
            if (isDeleting) {
                // Backspacing
                typedTextElement.textContent = currentText.substring(0, charIndex);
                charIndex--;
                typingSpeed = 30; // Faster when deleting
            } else {
                // Typing
                typedTextElement.textContent = currentText.substring(0, charIndex + 1);
                charIndex++;
                typingSpeed = 100; // Normal typing speed
            }
            
            // If we're done typing the full text
            if (!isDeleting && charIndex === currentText.length) {
                // Pause before starting to delete
                isDeleting = false;
                setTimeout(() => { 
                    isDeleting = true;
                }, pauseDuration);
            }
            
            // If we've deleted all characters
            if (isDeleting && charIndex < 0) {
                isDeleting = false;
                // Move to next text in the array
                textIndex = (textIndex + 1) % typingTexts.length;
                charIndex = 0;
            }
            
            // Schedule the next frame
            setTimeout(typeText, typingSpeed);
        }
        
        // Start the typing animation when the page loads
        window.onload = function() {
            // Initialize Lottie animation
            const animation = lottie.loadAnimation({
                container: document.getElementById('lottie-animation'),
                renderer: 'svg',
                loop: true,
                autoplay: true,
                // Replace with your Lottie JSON file path when deployed
                // For testing, you can use a placeholder or a sample animation URL
                path: 'https://gist.githubusercontent.com/daytonturner/62631a0ec8980c3f0e452d94fdae0151/raw/c8a9e458aeda53937ddab359d93c38120e105e93/gistfile1.txt'
            });
            
            // Scale animation to properly display in the container
            animation.addEventListener('DOMLoaded', function() {
                const animElement = document.querySelector('#lottie-animation svg');
                if (animElement) {
                    animElement.style.width = '100%';
                    animElement.style.height = '100%';
                    animElement.style.maxWidth = 'none';
                    animElement.style.maxHeight = 'none';
                    animElement.style.objectFit = 'cover';
                    animElement.style.objectPosition = 'center bottom'; // Position from bottom
                }
            });
            
            // Start typing animation
            setTimeout(typeText, 500);
        };
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            // Save preference to localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
        
        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
        }
        
// Email signup functionality
document.querySelector('.signup-button').addEventListener('click', function() {
    const emailInput = document.querySelector('.email-input');
    const email = emailInput.value;
    const button = this;
    const originalButtonText = button.textContent;
    
    if (validateEmail(email)) {
        // Disable button and show loading state
        button.disabled = true;
        button.textContent = 'Submitting...';
        
        const clientData = {
            email: email,
            userAgent: navigator.userAgent,
            language: navigator.language,
            screenWidth: window.screen.width,
            screenHeight: window.screen.height,
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            referrer: document.referrer || 'direct',
        };

	console.log(clientData);
        // Send to API Gateway Lambda
        fetch('https://2t2rkg32gc.execute-api.us-east-2.amazonaws.com/prod/subscribe', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ clientData })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Success message
                const signupContainer = emailInput.closest('.signup-container');
                const formContainer = emailInput.closest('form') || emailInput.closest('div');
                
                // Hide the form
                if (formContainer) formContainer.style.display = 'none';
                
                // Create and show success message
                const successMsg = document.createElement('div');
                successMsg.className = 'success-message';
                successMsg.innerHTML = '<p>Thank you for signing up! We will be in touch soon.</p>';
                
                // Add success message to the page
                if (signupContainer) {
                    signupContainer.appendChild(successMsg);
                } else {
                    formContainer.parentNode.appendChild(successMsg);
                }
            } else {
                // Error from server
                alert(data.message || 'Something went wrong. Please try again.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('There was an error signing up. Please try again.');
        })
        .finally(() => {
            // Reset button state
            button.disabled = false;
            button.textContent = originalButtonText;
        });
    } else {
        alert('Please enter a valid email address.');
    }
});

function validateEmail(email) {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}

    </script>
</body>
</html>
